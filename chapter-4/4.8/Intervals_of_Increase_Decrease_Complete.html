<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intervals of Increase/Decrease - Interactive Practice</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #ec008c 0%, #fc6767 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #ec008c 0%, #fc6767 100%); color: white; padding: 30px; }
        .back-link { color: white; text-decoration: none; margin-bottom: 15px; display: inline-block; }
        .back-link::before { content: "← "; }
        h1 { font-size: 2.2em; margin-bottom: 10px; }
        .tabs { display: flex; background: #f7fafc; border-bottom: 3px solid #e2e8f0; }
        .tab { flex: 1; padding: 18px; text-align: center; background: none; border: none; font-size: 1em; font-weight: 600; color: #718096; cursor: pointer; border-bottom: 3px solid transparent; margin-bottom: -3px; }
        .tab.active { color: #ec008c; border-bottom-color: #ec008c; background: white; }
        .content { padding: 35px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .concept-box { background: linear-gradient(135deg, #ec008c15 0%, #fc676715 100%); padding: 25px; border-radius: 15px; margin: 20px 0; border-left: 5px solid #ec008c; }
        .concept-box h3 { color: #ec008c; margin-bottom: 15px; }
        .graph-container { height: 320px; margin: 20px 0; border: 2px solid #e2e8f0; border-radius: 10px; }
        .comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .comp-box { background: #f8fafc; padding: 20px; border-radius: 10px; }
        .comp-box h4 { margin-bottom: 10px; }
        .example-box { background: #f7fafc; padding: 25px; border-radius: 15px; margin: 20px 0; }
        .nav-btn { padding: 8px 18px; background: #ec008c; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .nav-btn:disabled { background: #cbd5e0; }
        .problem-box { background: #fdf2f8; padding: 25px; border-radius: 15px; margin: 20px 0; }
        .problem-display { background: white; padding: 20px; border-radius: 10px; text-align: center; margin: 15px 0; font-size: 1.2em; border: 2px solid #ec008c; }
        .input-group { display: flex; gap: 10px; align-items: center; margin: 15px 0; flex-wrap: wrap; }
        input { padding: 10px 15px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 1em; }
        input:focus { border-color: #ec008c; outline: none; }
        .btn { padding: 10px 22px; border: none; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; }
        .btn-primary { background: #ec008c; color: white; }
        .btn-success { background: #10b981; color: white; }
        .feedback { padding: 15px; border-radius: 10px; margin: 15px 0; display: none; }
        .feedback.show { display: block; }
        .feedback.correct { background: #d1fae5; color: #065f46; }
        .feedback.incorrect { background: #fee2e2; color: #991b1b; }
        .score-display { background: linear-gradient(135deg, #ec008c 0%, #fc6767 100%); padding: 20px; border-radius: 15px; color: white; text-align: center; margin: 20px 0; }
        .score-numbers { font-size: 1.8em; font-weight: bold; }
        .progress-bar { height: 8px; background: rgba(255,255,255,0.3); border-radius: 5px; margin-top: 15px; }
        .progress-fill { height: 100%; background: white; border-radius: 5px; }
        .difficulty-selector { display: flex; gap: 10px; justify-content: center; margin: 20px 0; }
        .diff-btn { padding: 10px 22px; border: 2px solid #e5e7eb; background: white; border-radius: 20px; cursor: pointer; font-weight: 600; }
        .diff-btn.active { background: #ec008c; color: white; border-color: #ec008c; }
        .flow-guide { background: #f0fdf4; padding: 18px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #86efac; }
        .flow-steps { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
        .flow-step { padding: 6px 14px; background: white; border-radius: 18px; border: 1px solid #d1d5db; font-size: 0.9em; }
        .flow-step.current { background: #ec008c; color: white; border-color: #ec008c; }
        @media (max-width: 768px) { h1 { font-size: 1.7em; } .content { padding: 20px; } .comparison { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="./" class="back-link">Back to 4.8</a>
            <h1>Intervals of Increase & Decrease</h1>
            <p style="opacity:0.95">Learn, See, Practice, Do</p>
        </div>
        <div class="tabs">
            <button class="tab active" onclick="showTab('learn')">1 Learn</button>
            <button class="tab" onclick="showTab('see')">2 See</button>
            <button class="tab" onclick="showTab('practice')">3 Practice</button>
            <button class="tab" onclick="showTab('do')">4 Do</button>
        </div>
        <div class="content">
            <div id="learn" class="tab-content active">
                <div class="flow-guide">
                    <h3 style="color:#166534;margin-bottom:10px">Your Learning Path</h3>
                    <div class="flow-steps">
                        <span class="flow-step current">1. Learn</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">2. See</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">3. Practice</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">4. Do</span>
                    </div>
                </div>
                <h2 style="color:#ec008c;margin-bottom:20px">Understanding Increasing & Decreasing</h2>
                <div class="comparison">
                    <div class="comp-box">
                        <h4 style="color:#10b981">Increasing</h4>
                        <p>As x increases, y increases</p>
                        <p style="color:#666;margin-top:8px">Graph goes up ↗ from left to right</p>
                    </div>
                    <div class="comp-box">
                        <h4 style="color:#ef4444">Decreasing</h4>
                        <p>As x increases, y decreases</p>
                        <p style="color:#666;margin-top:8px">Graph goes down ↘ from left to right</p>
                    </div>
                </div>
                <div class="graph-container" id="learn-graph"></div>
                <div class="concept-box">
                    <h3>How to Find Intervals</h3>
                    <ol style="margin-left:20px;line-height:2;color:#4a5568">
                        <li>Find all turning points (local max/min)</li>
                        <li>Use interval notation: (a, b) or (-∞, c)</li>
                        <li>Trace left to right and identify direction</li>
                    </ol>
                </div>
                <div style="text-align:center;margin-top:30px"><button class="btn btn-primary" onclick="showTab('see')">Continue to See →</button></div>
            </div>
            <div id="see" class="tab-content">
                <div class="flow-guide">
                    <h3 style="color:#166534;margin-bottom:10px">Your Learning Path</h3>
                    <div class="flow-steps">
                        <span class="flow-step">1. Learn</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step current">2. See</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">3. Practice</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">4. Do</span>
                    </div>
                </div>
                <h2 style="color:#ec008c;margin-bottom:20px">Step-by-Step Examples</h2>
                <div class="example-box">
                    <div id="ex-content"></div>
                    <div class="graph-container" id="ex-graph"></div>
                    <div style="text-align:center;margin-top:15px">
                        <button class="nav-btn" id="prev-ex" onclick="chgEx(-1)" disabled>←</button>
                        <span style="margin:0 15px;color:#ec008c">Example <span id="ex-num">1</span>/3</span>
                        <button class="nav-btn" id="next-ex" onclick="chgEx(1)">→</button>
                    </div>
                </div>
                <div style="text-align:center;margin-top:30px"><button class="btn btn-primary" onclick="showTab('practice')">Continue to Practice →</button></div>
            </div>
            <div id="practice" class="tab-content">
                <div class="flow-guide">
                    <h3 style="color:#166534;margin-bottom:10px">Your Learning Path</h3>
                    <div class="flow-steps">
                        <span class="flow-step">1. Learn</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">2. See</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step current">3. Practice</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">4. Do</span>
                    </div>
                </div>
                <h2 style="color:#ec008c;margin-bottom:20px">Guided Practice</h2>
                <div class="score-display">
                    <h3>Progress</h3>
                    <div class="score-numbers"><span id="prac-score">0</span>/<span id="prac-total">4</span></div>
                    <div class="progress-bar"><div class="progress-fill" id="prac-prog" style="width:0%"></div></div>
                </div>
                <div class="problem-box" id="prac-problem"></div>
                <div style="text-align:center;margin-top:30px"><button class="btn btn-primary" onclick="showTab('do')">Continue to Do →</button></div>
            </div>
            <div id="do" class="tab-content">
                <div class="flow-guide">
                    <h3 style="color:#166534;margin-bottom:10px">Your Learning Path</h3>
                    <div class="flow-steps">
                        <span class="flow-step">1. Learn</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">2. See</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step">3. Practice</span><span style="color:#9ca3af">→</span>
                        <span class="flow-step current">4. Do</span>
                    </div>
                </div>
                <h2 style="color:#ec008c;margin-bottom:20px">Independent Practice</h2>
                <div class="difficulty-selector">
                    <button class="diff-btn active" onclick="setDiff('easy')">Easy</button>
                    <button class="diff-btn" onclick="setDiff('medium')">Medium</button>
                    <button class="diff-btn" onclick="setDiff('hard')">Hard</button>
                </div>
                <div class="score-display">
                    <h3>Score</h3>
                    <div class="score-numbers"><span id="do-score">0</span>/<span id="do-total">0</span></div>
                    <div class="progress-bar"><div class="progress-fill" id="do-prog" style="width:0%"></div></div>
                </div>
                <div class="problem-box" id="do-problem"><p style="text-align:center;color:#ec008c;font-weight:600">Click "New Problem" to begin!</p></div>
                <div class="graph-container" id="do-graph" style="display:none"></div>
                <div id="do-ans-section" style="display:none">
                    <div class="input-group">
                        <label style="font-weight:600">Increasing on:</label>
                        <input type="text" id="do-inc" placeholder="e.g., (-∞, 2)" style="width:150px">
                    </div>
                    <div class="input-group">
                        <label style="font-weight:600">Decreasing on:</label>
                        <input type="text" id="do-dec" placeholder="e.g., (2, ∞)" style="width:150px">
                    </div>
                    <button class="btn btn-primary" onclick="checkDo()">Check</button>
                    <div class="feedback" id="do-feedback"></div>
                </div>
                <div style="text-align:center;margin-top:20px"><button class="btn btn-success" onclick="newDo()">New Problem</button></div>
            </div>
        </div>
    </div>
    <script>
        function showTab(id) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${id}')"]`).classList.add('active');
            document.getElementById(id).classList.add('active');
            if (id === 'learn') drawLearn();
            if (id === 'see') initEx();
            if (id === 'practice') initPrac();
        }
        function drawLearn() {
            const x = [], y = [];
            for (let i = -3; i <= 3; i += 0.1) { x.push(i); y.push(i*i*i - 3*i); }
            Plotly.newPlot('learn-graph', [{ x, y, line: { color: '#ec008c', width: 3 } }], {
                title: 'f(x) = x³ - 3x',
                shapes: [
                    { type: 'line', x0: -3, x1: -1, y0: 0, y1: 0, line: { color: '#10b981', width: 4 }, yref: 'paper', y0: 0.05, y1: 0.05 },
                    { type: 'line', x0: -1, x1: 1, y0: 0, y1: 0, line: { color: '#ef4444', width: 4 }, yref: 'paper', y0: 0.05, y1: 0.05 },
                    { type: 'line', x0: 1, x1: 3, y0: 0, y1: 0, line: { color: '#10b981', width: 4 }, yref: 'paper', y0: 0.05, y1: 0.05 }
                ],
                annotations: [
                    { x: -2, y: -5.5, text: 'Increasing', showarrow: false, font: { color: '#10b981' } },
                    { x: 0, y: -5.5, text: 'Decreasing', showarrow: false, font: { color: '#ef4444' } },
                    { x: 2, y: -5.5, text: 'Increasing', showarrow: false, font: { color: '#10b981' } }
                ],
                margin: { t: 40 }
            }, { responsive: true });
        }
        const examples = [
            { poly: 'x²', inc: '(0, ∞)', dec: '(-∞, 0)', desc: 'Parabola with vertex at origin' },
            { poly: 'x³ - 3x', inc: '(-∞, -1) ∪ (1, ∞)', dec: '(-1, 1)', desc: 'Cubic with turning points at x = -1, 1' },
            { poly: '-x² + 4', inc: '(-∞, 0)', dec: '(0, ∞)', desc: 'Downward parabola, max at x = 0' }
        ];
        let curEx = 0;
        function initEx() { curEx = 0; loadEx(); }
        function loadEx() {
            const e = examples[curEx];
            document.getElementById('ex-num').textContent = curEx + 1;
            document.getElementById('ex-content').innerHTML = `
                <h4 style="color:#ec008c">f(x) = ${e.poly}</h4>
                <p>${e.desc}</p>
                <p style="margin-top:10px"><span style="color:#10b981">Increasing:</span> ${e.inc}</p>
                <p><span style="color:#ef4444">Decreasing:</span> ${e.dec}</p>`;
            drawEx(); updateExNav();
        }
        function drawEx() {
            const x = [], y = [];
            for (let i = -3; i <= 3; i += 0.1) {
                x.push(i);
                if (curEx === 0) y.push(i*i);
                else if (curEx === 1) y.push(i*i*i - 3*i);
                else y.push(-i*i + 4);
            }
            Plotly.newPlot('ex-graph', [{ x, y, line: { color: '#ec008c', width: 3 } }], { margin: { t: 20 } }, { responsive: true });
        }
        function chgEx(d) { curEx += d; loadEx(); }
        function updateExNav() {
            document.getElementById('prev-ex').disabled = curEx === 0;
            document.getElementById('next-ex').disabled = curEx === examples.length - 1;
        }
        const pracProbs = [
            { poly: 'x²', inc: '(0,∞)', dec: '(-∞,0)' },
            { poly: '-x²', inc: '(-∞,0)', dec: '(0,∞)' },
            { poly: '(x-2)²', inc: '(2,∞)', dec: '(-∞,2)' },
            { poly: '-(x+1)²', inc: '(-∞,-1)', dec: '(-1,∞)' }
        ];
        let pracIdx = 0, pracScore = 0, pracDone = new Set();
        function initPrac() { pracIdx = 0; pracScore = 0; pracDone.clear(); loadPrac(); updatePracScore(); }
        function loadPrac() {
            const p = pracProbs[pracIdx];
            document.getElementById('prac-problem').innerHTML = `
                <h4 style="color:#ec008c">Problem ${pracIdx+1}/${pracProbs.length}</h4>
                <div class="problem-display">f(x) = ${p.poly}</div>
                <div class="input-group"><label>Increasing:</label><input type="text" id="prac-inc" placeholder="e.g., (0, ∞)" style="width:150px"></div>
                <div class="input-group"><label>Decreasing:</label><input type="text" id="prac-dec" placeholder="e.g., (-∞, 0)" style="width:150px"></div>
                <button class="btn btn-primary" onclick="checkPrac()">Check</button>
                <div class="feedback" id="prac-fb"></div>
                ${pracIdx < pracProbs.length-1 ? '<button class="btn btn-success" id="next-prac" style="display:none;margin-top:15px" onclick="nextPrac()">Next →</button>' : ''}`;
        }
        function norm(s) { return s.replace(/\s/g,'').toLowerCase().replace('infinity','∞').replace('inf','∞'); }
        function checkPrac() {
            const p = pracProbs[pracIdx], fb = document.getElementById('prac-fb');
            const uInc = norm(document.getElementById('prac-inc').value);
            const uDec = norm(document.getElementById('prac-dec').value);
            if (uInc === norm(p.inc) && uDec === norm(p.dec)) {
                fb.className = 'feedback show correct';
                fb.textContent = 'Correct!';
                if (!pracDone.has(pracIdx)) { pracScore++; pracDone.add(pracIdx); updatePracScore(); }
                const btn = document.getElementById('next-prac'); if (btn) btn.style.display = 'inline-block';
            } else {
                fb.className = 'feedback show incorrect';
                fb.textContent = `Check your answer. Inc: ${p.inc}, Dec: ${p.dec}`;
            }
        }
        function nextPrac() { pracIdx++; loadPrac(); }
        function updatePracScore() {
            document.getElementById('prac-score').textContent = pracScore;
            document.getElementById('prac-total').textContent = pracProbs.length;
            document.getElementById('prac-prog').style.width = (pracScore/pracProbs.length*100)+'%';
        }
        const doProbs = {
            easy: [{ v: 0, dir: 'up', inc: '(0,∞)', dec: '(-∞,0)' }, { v: 0, dir: 'down', inc: '(-∞,0)', dec: '(0,∞)' }],
            medium: [{ v: 3, dir: 'up', inc: '(3,∞)', dec: '(-∞,3)' }, { v: -2, dir: 'down', inc: '(-∞,-2)', dec: '(-2,∞)' }],
            hard: [{ v: 1, dir: 'up', inc: '(1,∞)', dec: '(-∞,1)' }, { v: -4, dir: 'down', inc: '(-∞,-4)', dec: '(-4,∞)' }]
        };
        let diff = 'easy', doScore = 0, doTotal = 0, curDo = null;
        function setDiff(d) { diff = d; document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active')); event.target.classList.add('active'); }
        function newDo() {
            const probs = doProbs[diff];
            curDo = probs[Math.floor(Math.random()*probs.length)];
            const sign = curDo.dir === 'up' ? '' : '-';
            document.getElementById('do-problem').innerHTML = `<div class="problem-display">f(x) = ${sign}(x ${curDo.v >= 0 ? '- ' + curDo.v : '+ ' + (-curDo.v)})²</div>`;
            document.getElementById('do-graph').style.display = 'block';
            document.getElementById('do-ans-section').style.display = 'block';
            document.getElementById('do-inc').value = '';
            document.getElementById('do-dec').value = '';
            document.getElementById('do-feedback').className = 'feedback';
            drawDoGraph();
        }
        function drawDoGraph() {
            const x = [], y = [];
            for (let i = curDo.v - 4; i <= curDo.v + 4; i += 0.1) {
                x.push(i);
                y.push(curDo.dir === 'up' ? (i - curDo.v) * (i - curDo.v) : -(i - curDo.v) * (i - curDo.v));
            }
            Plotly.newPlot('do-graph', [{ x, y, line: { color: '#ec008c', width: 3 } }], { margin: { t: 20 } }, { responsive: true });
        }
        function checkDo() {
            const fb = document.getElementById('do-feedback');
            const uInc = norm(document.getElementById('do-inc').value);
            const uDec = norm(document.getElementById('do-dec').value);
            doTotal++;
            if (uInc === norm(curDo.inc) && uDec === norm(curDo.dec)) {
                doScore++;
                fb.className = 'feedback show correct';
                fb.textContent = 'Correct!';
            } else {
                fb.className = 'feedback show incorrect';
                fb.textContent = `Inc: ${curDo.inc}, Dec: ${curDo.dec}`;
            }
            updateDoScore();
        }
        function updateDoScore() {
            document.getElementById('do-score').textContent = doScore;
            document.getElementById('do-total').textContent = doTotal;
            document.getElementById('do-prog').style.width = (doTotal > 0 ? doScore/doTotal*100 : 0)+'%';
        }
        document.addEventListener('DOMContentLoaded', drawLearn);
    </script>
</body>
</html>
